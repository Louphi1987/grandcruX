<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Formulaire grandcruX ‚Äî FR / NL / EN</title>
  <style>
    :root{
      --wine:#6a1b1b;
      --wine-dark:#8b2323;
      --bg:#faf6f3;
      --text:#2a1e1e;
      --muted:#7a5a5a;
      --card:#fff;
      --accent-bg:#fff6f2;
      --accent-border:#b63a3a;
      --radius:20px;
    }
    *{box-sizing:border-box}
    body {
      background: var(--bg);
      margin: 0;
      padding: 0;
      color: var(--text);
    }
    .brand-header {
      text-align: center;
      margin-bottom: 30px;
      margin-top: 10px;
    }

    .logo-top {
      height: 90px;
      margin-bottom: 10px;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.15));
    }

    .brand-header h1 {
      font-family: "Georgia", serif;
      color: var(--wine);
      font-size: 2rem;
      letter-spacing: 1px;
      margin: 0;
    }

    .brand-header .subtitle {
      font-style: italic;
      color: var(--muted);
      margin-top: 6px;
      font-size: 1rem;
    }
    .container {
      max-width: 700px;
      margin: auto;
      background: var(--card);
      border-radius: var(--radius);
      padding: 25px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      margin-top: 20px;
      position: relative;
    }

    h1 {
      text-align: center;
      color: var(--wine);
      margin-bottom: 5px;
    }

    .subtitle {
      text-align: center;
      color: var(--muted);
      font-style: italic;
      margin-bottom: 20px;
    }

    section { margin-bottom: 30px; }

    label {
      display: block;
      font-weight: 600;
      margin-top: 12px;
    }

    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--accent-border);
      outline: none;
    }

    .checkbox-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 15px;
    }

    .checkbox-group label { display:flex; align-items:center; gap:6px; }

    .checkbox-group input[type="checkbox"] {
      margin: 0; padding: 0; appearance: none; -webkit-appearance: none;
      width: 16px; height: 16px; border: 2px solid var(--wine);
      border-radius: 3px; position: relative; cursor: pointer;
    }

    .checkbox-group input[type="checkbox"]:checked { background-color: var(--wine); }

    .submit-btn {
      background-color: var(--wine);
      color: white;
      border: none;
      border-radius: 12px;
      padding: 12px 20px;
      width: 100%;
      font-size: 18px;
      font-weight: bold;
      margin-top: 20px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .submit-btn:hover { background-color: var(--wine-dark); }

    @media (max-width: 600px) {
      .container { margin: 10px; padding: 20px; }
    }

    /* Transitions et multi-pages */
    .form-step { display: none; animation: fade 0.25s ease-in-out; }
    .form-step.active { display: block; }
    @keyframes fade { from {opacity: 0;} to {opacity: 1;} }

    .step-buttons {
      display: flex; gap:12px; justify-content: space-between; margin-top: 20px;
    }

    .rapport-card {
      background: var(--accent-bg);
      border: 2px solid var(--accent-border);
      border-radius: 16px;
      padding: 25px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      text-align: center;
    }

    .rapport-card h2 { color: var(--wine); margin-bottom: 10px; }
    .rapport-card p { color: #5c3c3c; font-style: italic; margin-bottom: 20px; }

    /* Boutons de langue */
    .lang-switch {
      position: absolute; top: 10px; right: 10px; display: flex; gap: 8px;
    }
    .lang-btn {
      background: var(--wine); color:#fff; border: none; padding: 6px 10px; border-radius: 999px;
      font-weight: 700; cursor: pointer; font-size: 13px; letter-spacing: .3px;
      box-shadow: 0 2px 6px rgba(0,0,0,.12);
    }
    .lang-btn[aria-pressed="true"] { background: var(--wine-dark); outline: 2px solid #e8d6d6; }
    .lang-btn:focus-visible{ outline: 3px solid #d8b0b0; }

    .optin-conditions, .optin-impression {
      text-align: left;
      margin-top: 20px;
      font-size: 0.95rem;
    }

    .optin-conditions label, .optin-impression label {
      display: block;
      cursor: pointer;
      line-height: 1.5;
    }

    .conditions-content {
      display: none;
      margin-top: 12px;
      background: #fff;
      padding: 15px;
      border-radius: 12px;
      border: 1px solid var(--accent-border);
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      transition: all 0.3s ease;
    }

    .cg-link {
      color: var(--accent-border);
      cursor: pointer;
      text-decoration: underline;
    }

    #sendReport[disabled] {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .optin-impression p {
      font-size: 0.9rem;
      color: #555;
      margin-left: 24px;
    }
    .optin-confidentialite {
      text-align: left;
      margin-top: 20px;
      font-size: 0.95rem;
    }

    .optin-confidentialite label {
      display: block;
      cursor: pointer;
      line-height: 1.5;
    }

  </style>
</head>
<body>
  <div class="container">
    <!-- Switch langues -->
    <div class="lang-switch" aria-label="S√©lecteur de langue">
      <button type="button" class="lang-btn" data-lang="fr" aria-pressed="true">FR</button>
      <button type="button" class="lang-btn" data-lang="nl" aria-pressed="false">NL</button>
      <button type="button" class="lang-btn" data-lang="en" aria-pressed="false">EN</button>
    </div>

    <div class="brand-header">
      <img src="{{ url_for('static', filename='grandcrux.png') }}" alt="Logo GrandcruX" class="logo-top">
      <h1><span data-i18n="title">Formulaire GrandcruX</span></h1>
      <p class="subtitle" data-i18n="subtitle">Le vin entre passion et patrimoine</p>
    </div>

    <form id="multiForm" method="POST">
      <!-- Lang active envoy√©e au backend -->
      <input type="hidden" name="lang" id="lang_hidden" value="fr" />

      <!-- √âTAPE 1 -->
      <div class="form-step active" id="step1">
        <h2 data-i18n="step1_title">VOLET 1 ‚Äî Le vin</h2>
        <p><em data-i18n="step1_desc">Ce premier volet vise √† comprendre votre rapport au vin : plaisir, patrimoine ou les deux.</em></p>

        <label data-for-base="age" data-i18n="label_age">Quel √¢ge avez-vous?</label>
        <input type="number" data-id-base="age" data-name-base="age" min="18" required>

        <label data-for-base="relation_vin" data-i18n="label_relation">Quelle est votre relation principale au vin ?</label>
        <select data-id-base="relation_vin" data-name-base="relation_vin" required>
          <option value="consommation" data-i18n-option="opt_relation_consommation">Consommation</option>
          <option value="investissement" data-i18n-option="opt_relation_investissement">Investissement</option>
          <option value="les_deux" data-i18n-option="opt_relation_les_deux">Les deux</option>
        </select>

        <label data-for-base="connaissance_vin" data-i18n="label_connaissance">Quelle est votre connaissance du march√© du vin ?</label>
        <select data-id-base="connaissance_vin" data-name-base="connaissance_vin">
          <option value="debutant" data-i18n-option="opt_connaissance_debutant">D√©butant(e)</option>
          <option value="amateur" data-i18n-option="opt_connaissance_amateur">Amateur(e) √©clair√©(e)</option>
          <option value="connaisseur" data-i18n-option="opt_connaissance_connaisseur">Connaisseur(se) / collectionneur(se)</option>
          <option value="professionnel" data-i18n-option="opt_connaissance_professionnel">Professionnel(le) du vin</option>
        </select>

        <label data-for-base="region_preferee" data-i18n="label_region">Quelle r√©gion viticole vous attire le plus ?</label>
        <select data-id-base="region_preferee" data-name-base="region_preferee">
          <option value="bordeaux" data-i18n-option="opt_region_bordeaux">Bordeaux</option>
          <option value="bourgogne" data-i18n-option="opt_region_bourgogne">Bourgogne</option>
          <option value="vallee_du_rhone" data-i18n-option="opt_region_rhone">Vall√©e du Rh√¥ne</option>
          <option value="loire" data-i18n-option="opt_region_loire">Loire</option>
          <option value="champagne" data-i18n-option="opt_region_champagne">Champagne</option>
          <option value="alsace" data-i18n-option="opt_region_alsace">Alsace</option>
          <option value="provence" data-i18n-option="opt_region_provence">Provence</option>
          <option value="italie" data-i18n-option="opt_region_italie">Italie (Pi√©mont, Toscane...)</option>
          <option value="espagne" data-i18n-option="opt_region_espagne">Espagne (Rioja, Ribera del Duero...)</option>
          <option value="portugal" data-i18n-option="opt_region_portugal">Portugal</option>
          <option value="nouveau_monde" data-i18n-option="opt_region_nouveau_monde">Nouveau Monde (Chili, Argentine, Australie...)</option>
          <option value="autre" data-i18n-option="opt_region_autre">Je n'ai pas de pr√©f√©rence et suis √† l'√©coute de bons conseils</option>
        </select>

        <label data-for-base="budget_vin" data-i18n="label_budget">Quel budget annuel consacrez-vous au vin ?</label>
        <select data-id-base="budget_vin" data-name-base="budget_vin">
          <option value="moins_500" data-i18n-option="opt_budget_moins_500">Moins de 500 ‚Ç¨</option>
          <option value="500_2000" data-i18n-option="opt_budget_500_2000">Entre 500 ‚Ç¨ et 2 000 ‚Ç¨</option>
          <option value="2000_10000" data-i18n-option="opt_budget_2000_10000">Entre 2 000 ‚Ç¨ et 10 000 ‚Ç¨</option>
          <option value="plus_10000" data-i18n-option="opt_budget_plus_10000">Plus de 10 000 ‚Ç¨</option>
        </select>

        <label data-for-base="forme_possession" data-i18n="label_possession">Sous quelle forme poss√©dez-vous du vin (ou souhaiteriez-vous le faire) ?</label>
        <select data-id-base="forme_possession" data-name-base="forme_possession">
          <option value="cave_personnelle" data-i18n-option="opt_poss_cave_personnelle">Cave personnelle</option>
          <option value="cave_externalisee" data-i18n-option="opt_poss_cave_externalisee">Cave externalis√©e / garde professionnelle</option>
          <option value="fonds_investissement" data-i18n-option="opt_poss_fonds">Fonds ou plateformes d‚Äôinvestissement dans le vin</option>
          <option value="pas_encore" data-i18n-option="opt_poss_pas_encore">Pas encore, mais je souhaite me renseigner</option>
        </select>

        <label data-for-base="motivation" data-i18n="label_motivation">Quelle est votre motivation principale ?</label>
        <select data-id-base="motivation" data-name-base="motivation">
          <option value="plaisir" data-i18n-option="opt_motiv_plaisir">Plaisir gustatif</option>
          <option value="transmission" data-i18n-option="opt_motiv_transmission">Transmission familiale</option>
          <option value="placement" data-i18n-option="opt_motiv_placement">Placement √† long terme</option>
          <option value="diversification" data-i18n-option="opt_motiv_diversification">Diversification du patrimoine</option>
          <option value="autre" data-i18n-option="opt_motiv_autre">Autre</option>
        </select>

        <label data-for-base="risque" data-i18n="label_risque">Quel niveau de risque √™tes-vous pr√™t(e) √† accepter ?</label>
        <select data-id-base="risque" data-name-base="risque">
          <option value="tres_faible" data-i18n-option="opt_risque_tres_faible">Tr√®s faible ‚Äî je privil√©gie la s√©curit√©</option>
          <option value="modere" data-i18n-option="opt_risque_modere">Mod√©r√© ‚Äî un √©quilibre entre plaisir et rendement</option>
          <option value="eleve" data-i18n-option="opt_risque_eleve">√âlev√© ‚Äî je recherche avant tout la performance</option>
        </select>

        <div class="step-buttons">
          <button type="button" class="submit-btn" data-i18n="btn_next" onclick="nextStep()">Suivant ‚û°Ô∏è</button>
        </div>
      </div>

      <!-- √âTAPE 2 -->
      <div class="form-step" id="step2">
        <h2 data-i18n="step2_title">VOLET 2 ‚Äî Transmission</h2>
        <p><em data-i18n="step2_desc">Le vin peut aussi √™tre un symbole fort de transmission ‚Äî culturelle, √©motionnelle et patrimoniale.</em></p>

        <label data-for-base="enfants" data-i18n="label_enfants">Avez-vous des enfants ?</label>
        <select data-id-base="enfants" data-name-base="enfants">
          <option value="oui" data-i18n-option="opt_oui">Oui</option>
          <option value="non" data-i18n-option="opt_non">Non</option>
        </select>

        <label data-for-base="nombre_enfants" data-i18n="label_nombre_enfants">Si oui, combien ?</label>
        <input type="number" data-id-base="nombre_enfants" data-name-base="nombre_enfants" min="0">

        <label data-for-base="mariage" data-i18n="label_mariage">√ätes-vous mari√©(e) ?</label>
        <select data-id-base="mariage" data-name-base="mariage">
          <option value="oui" data-i18n-option="opt_oui">Oui</option>
          <option value="non" data-i18n-option="opt_non">Non</option>
        </select>

        <label data-for-base="regime" data-i18n="label_regime">Si oui, sous quel r√©gime matrimonial ?</label>
        <select data-id-base="regime" data-name-base="regime">
          <option value="communautelegale" data-i18n-option="opt_regime_communautelegale">Communaut√© l√©gale</option>
          <option value="separationbien" data-i18n-option="opt_regime_separationbien">S√©paration de biens</option>
          <option value="communauteuniverselle" data-i18n-option="opt_regime_communauteuniverselle">Communaut√© universelle</option>
        </select>

        <label data-for-base="societe" data-i18n="label_societe">Avez-vous une soci√©t√© ?</label>
        <select data-id-base="societe" data-name-base="societe">
          <option value="non" data-i18n-option="opt_non">Non</option>
          <option value="oui" data-i18n-option="opt_oui">Oui</option>
        </select>

        <label data-for-base="type_societe" data-i18n="label_type_societe">Si oui, pr√©cisez le type :</label>
        <input type="text" data-id-base="type_societe" data-name-base="type_societe">

        <label data-for-base="donations" data-i18n="label_donations">Avez-vous d√©j√† effectu√© des donations ?</label>
        <select data-id-base="donations" data-name-base="donations">
          <option value="oui" data-i18n-option="opt_oui">Oui</option>
          <option value="non" data-i18n-option="opt_non">Non</option>
        </select>

        <label data-for-base="importance_patrimoine" data-i18n="label_importance_patrimoine">Quelle importance accordez-vous √† la notion de ‚Äúpatrimoine culturel‚Äù dans la transmission ?</label>
        <select data-id-base="importance_patrimoine" data-name-base="importance_patrimoine">
          <option value="faible" data-i18n-option="opt_importance_faible">Faible</option>
          <option value="moyenne" data-i18n-option="opt_importance_moyenne">Moyenne</option>
          <option value="elevee" data-i18n-option="opt_importance_elevee">√âlev√©e</option>
        </select>

        <label data-i18n="label_presentation">Souhaitez-vous recevoir une pr√©sentation sur :</label>
        <div class="checkbox-group">
          <label><input type="checkbox" data-name-base="presentation_transmission" data-id-base="presentation_transmission" value="transmission"> <span data-i18n="cb_transmission">Le vin comme support de transmission</span></label>
          <label><input type="checkbox" data-name-base="presentation_aspects_culturels" data-id-base="presentation_aspects_culturels" value="aspects_culturels"> <span data-i18n="cb_aspects">Aspects culturels et bonnes pratiques</span></label>
        </div>

        <label data-for-base="remarques" data-i18n="label_remarques">Remarques compl√©mentaires / souhaits particuliers :</label>
        <textarea rows="3" data-id-base="remarques" data-name-base="remarques"></textarea>

        <div class="step-buttons">
          <button type="button" class="submit-btn" data-i18n="btn_prev" onclick="prevStep()">‚¨ÖÔ∏è Retour</button>
          <button type="button" class="submit-btn" data-i18n="btn_next" onclick="nextStep()">Suivant ‚û°Ô∏è</button>
        </div>
      </div>

      <!-- √âTAPE 3 -->
      <div class="form-step" id="step3">
        <div class="rapport-card">
          <h2 data-i18n="step3_title">üìú D√©sirez-vous obtenir votre rapport gratuit ?</h2>
          <p data-i18n="step3_desc">Merci de nous faire parvenir vos coordonn√©es afin de recevoir votre rapport viticole personnalis√©.</p>

          <!-- Coordonn√©es -->
          <label data-for-base="nom" data-i18n="label_nom">Nom</label>
          <input type="text" data-id-base="nom" data-name-base="nom" required>

          <label data-for-base="prenom" data-i18n="label_prenom">Pr√©nom</label>
          <input type="text" data-id-base="prenom" data-name-base="prenom" required>

          <label data-for-base="mail" data-i18n="label_mail">Adresse e-mail</label>
          <input type="email" data-id-base="mail" data-name-base="mail" required>

          <label data-for-base="tel" data-i18n="label_tel">T√©l√©phone</label>
          <input type="tel" data-id-base="tel" data-name-base="tel">

          <label data-for-base="domicile" data-i18n="label_domicile">Domicile</label>
          <input type="text" data-id-base="domicile" data-name-base="domicile">

          <!-- ‚úÖ Bloc opt-in Conditions -->
          <div class="optin-conditions">
            <label>
              <input type="checkbox" id="acceptCG">
              <span data-i18n="cg_checkbox_label">
                J‚Äôai lu et j‚Äôaccepte les <span id="toggleCG"
                                               class="cg-link"
                                               onclick="event.stopPropagation(); event.preventDefault();">
                                               Conditions de GrandcruX
                                        </span>
              </span>
            </label>

            <!-- Menu d√©roulant -->
            <div id="conditionsContent" class="conditions-content">
              <h4 data-i18n="conditions_title">Conditions de GrandcruX</h4>

              <p><strong data-i18n="conditions_a_title">a) Clause de non-conseil</strong><br>
              <span data-i18n="conditions_a_text">Les rapports GrandcruX sont fournis √† titre informatif et ne constituent en aucun cas un conseil en investissement, fiscal, juridique ou financier.</span></p>

              <p><strong data-i18n="conditions_b_title">b) Clause de non-responsabilit√©</strong><br>
              <span data-i18n="conditions_b_text">GrandcruX et ses partenaires ne sauraient √™tre tenus responsables de tout pr√©judice direct ou indirect r√©sultant de l‚Äôinterpr√©tation ou de l‚Äôutilisation du contenu du rapport.</span></p>

              <p><strong data-i18n="conditions_c_title">c) Clause de propri√©t√© intellectuelle</strong><br>
              <span data-i18n="conditions_c_text">Les rapports GrandcruX sont la propri√©t√© exclusive de GrandcruX. Toute reproduction, diffusion, modification ou revente, totale ou partielle, sans autorisation √©crite pr√©alable, est strictement interdite.</span></p>

              <p><strong data-i18n="conditions_d_title">d) Clause d‚Äôacceptation</strong><br>
              <span data-i18n="conditions_d_text">En cochant la case d‚Äôacceptation ou en t√©l√©chargeant le rapport, l‚Äôutilisateur reconna√Æt avoir lu et accept√© les pr√©sentes Conditions.</span></p>
            </div>
          </div>

          <!-- ‚úÖ Bloc opt-in Confidentialit√© (RGPD) -->
          <div class="optin-confidentialite">
            <label>
              <input type="checkbox" id="acceptRGPD">
              <span data-i18n="rgpd_checkbox_label">
                J‚Äôaccepte que mes donn√©es personnelles soient utilis√©es par GrandcruX pour 
                l‚Äô√©tablissement de mon rapport et conserv√©es conform√©ment √† la
                  <span id="togglePrivacy" class="cg-link"
                      onclick="event.stopPropagation(); event.preventDefault();">
                        <strong data-i18n="rgpd_privacy_title">Politique de confidentialit√©.</strong>
                  </span>
              </span>
            </label>


            <!-- Menu d√©roulant -->
            <div id="privacyContent" class="conditions-content">

              <h4 data-i18n="privacy_title">Politique de confidentialit√© GrandcruX</h4>

              <p>
                <strong data-i18n="privacy_f1_title">1. Finalit√© du traitement</strong><br>
                <span data-i18n="privacy_f1_text">
                  GrandcruX collecte certaines donn√©es personnelles (nom, e-mail, t√©l√©phone, informations familiales et patrimoniales) uniquement afin d‚Äô√©tablir le rapport demand√©.
                </span>
              </p>

              <p>
                <strong data-i18n="privacy_f2_title">2. Base l√©gale</strong><br>
                <span data-i18n="privacy_f2_text">
                  Le traitement repose sur votre consentement explicite et sur votre demande volontaire d‚Äôobtenir un rapport personnalis√©.
                </span>
              </p>

              <p>
                <strong data-i18n="privacy_f3_title">3. Donn√©es collect√©es</strong><br>
                <span data-i18n="privacy_f3_text">
                  Nom, pr√©nom, adresse e-mail, adresse postale, num√©ro de t√©l√©phone, informations familiales (ex. nombre d‚Äôenfants), informations patrimoniales explicitement fournies.
                </span>
              </p>

              <p>
                <strong data-i18n="privacy_f4_title">4. Dur√©e de conservation</strong><br>
                <span data-i18n="privacy_f4_text">
                  Vos donn√©es sont conserv√©es pendant 12 mois apr√®s l‚Äôenvoi du rapport, sauf demande de suppression anticip√©e.
                </span>
              </p>

              <p>
                <strong data-i18n="privacy_f5_title">5. S√©curit√© et stockage</strong><br>
                <span data-i18n="privacy_f5_text">
                  Les donn√©es sont h√©berg√©es au sein de l‚ÄôUnion europ√©enne avec chiffrement et acc√®s limit√©.
                </span>
              </p>

              <p>
                <strong data-i18n="privacy_f6_title">6. Partage des donn√©es</strong><br>
                <span data-i18n="privacy_f6_text">
                  Les donn√©es ne sont jamais vendues. Elles sont uniquement accessibles √† l‚Äô√©quipe GrandcruX et aux prestataires techniques n√©cessaires.
                </span>
              </p>

              <p>
                <strong data-i18n="privacy_f7_title">7. Vos droits</strong><br>
                <span data-i18n="privacy_f7_text">
                  Vous disposez d‚Äôun droit d‚Äôacc√®s, de rectification, de suppression, d‚Äôopposition, de portabilit√© et de retrait du consentement.  
                  Pour exercer vos droits : <strong>info@grandcrux.com</strong>
                </span>
              </p>

              <p>
                <strong data-i18n="privacy_f8_title">8. Responsable du traitement</strong><br>
                <span data-i18n="privacy_f8_text">
                  GrandcruX ‚Äì Contact : info@grandcrux.com
                </span>
              </p>

            </div>
          </div>

          <!-- ‚úÖ Bloc version imprim√©e -->
          <div class="optin-impression">
            <label>
              <input type="checkbox" id="printOption" name="printOption">
              <span data-i18n="print_option_label">
                Je souhaite √©galement recevoir une <strong>version imprim√©e</strong> de mon rapport,
                √©ventuellement accompagn√©e du <em>pack d√©gustation GrandcruX üç∑</em>.
              </span>
            </label>
            <p data-i18n="print_option_note">(Option payante : impression sur papier premium, envoi avec s√©lection de vin.)</p>
          </div>

          <!-- ‚úÖ Boutons -->
          <div class="step-buttons">
            <button type="button" class="submit-btn" data-i18n="btn_prev" onclick="prevStep()">‚¨ÖÔ∏è Retour</button>
            <button type="submit" id="sendReport" class="submit-btn" data-i18n="btn_submit" disabled>Envoyer ‚úÖ</button>
          </div>
        </div>
      </div>
    </form>
  </div>

  <script>
    // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
    // Gestion des √©tapes
    // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
    let currentStep = 0;
    const steps = document.querySelectorAll('.form-step');
    function showStep(index) {
      steps.forEach((step, i) => step.classList.toggle('active', i === index));
    }
    function nextStep() {
      if (currentStep < steps.length - 1) {
        currentStep++;
        showStep(currentStep);
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    }
    function prevStep() {
      if (currentStep > 0) {
        currentStep--;
        showStep(currentStep);
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    }

    // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
    // i18n ‚Äî dictionnaires FR / NL / EN
    // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
    const t = {
      fr: {
        title: 'Formulaire',
        subtitle: 'Le vin entre passion et patrimoine',
        step1_title: 'VOLET 1 ‚Äî Le vin',
        step1_desc: 'Ce premier volet vise √† comprendre votre rapport au vin : plaisir, patrimoine ou les deux.',
        label_age: 'Quel √¢ge avez-vous?',
        label_relation: 'Quelle est votre relation principale au vin ?',
        opt_relation_consommation: 'Consommation',
        opt_relation_investissement: 'Investissement',
        opt_relation_les_deux: "Consommation et investissement",
        label_connaissance: 'Quelle est votre connaissance du march√© du vin ?',
        opt_connaissance_debutant: 'D√©butant(e)',
        opt_connaissance_amateur: 'Amateur(e) √©clair√©(e)',
        opt_connaissance_connaisseur: 'Connaisseur(se) / collectionneur(se)',
        opt_connaissance_professionnel: 'Professionnel(le) du vin',
        label_region: 'Quelle r√©gion viticole vous attire le plus ?',
        opt_region_bordeaux: 'Bordeaux',
        opt_region_bourgogne: 'Bourgogne',
        opt_region_rhone: 'Vall√©e du Rh√¥ne',
        opt_region_loire: 'Loire',
        opt_region_champagne: 'Champagne',
        opt_region_alsace: 'Alsace',
        opt_region_provence: 'Provence',
        opt_region_italie: 'Italie (Pi√©mont, Toscane...)',
        opt_region_espagne: 'Espagne (Rioja, Ribera del Duero...)',
        opt_region_portugal: 'Portugal',
        opt_region_nouveau_monde: 'Nouveau Monde (Chili, Argentine, Australie...)',
        opt_region_autre: "Je n'ai pas de pr√©f√©rence et suis √† l'√©coute de bons conseils",
        label_budget: 'Quel budget annuel consacrez-vous au vin ?',
        opt_budget_moins_500: 'Moins de 500 ‚Ç¨',
        opt_budget_500_2000: 'Entre 500 ‚Ç¨ et 2 000 ‚Ç¨',
        opt_budget_2000_10000: 'Entre 2 000 ‚Ç¨ et 10 000 ‚Ç¨',
        opt_budget_plus_10000: 'Plus de 10 000 ‚Ç¨',
        label_possession: 'Sous quelle forme poss√©dez-vous du vin (ou souhaiteriez-vous le faire) ?',
        opt_poss_cave_personnelle: 'Cave personnelle',
        opt_poss_cave_externalisee: 'Cave externalis√©e / garde professionnelle',
        opt_poss_fonds: "Fonds ou plateformes d‚Äôinvestissement dans le vin",
        opt_poss_pas_encore: 'Pas encore, mais je souhaite me renseigner',
        label_motivation: 'Quelle est votre motivation principale ?',
        opt_motiv_plaisir: 'Plaisir gustatif',
        opt_motiv_transmission: 'Transmission familiale',
        opt_motiv_placement: 'Placement √† long terme',
        opt_motiv_diversification: 'Diversification du patrimoine',
        opt_motiv_autre: 'Autre',
        label_risque: 'Quel niveau de risque √™tes-vous pr√™t(e) √† accepter ?',
        opt_risque_tres_faible: 'Tr√®s faible ‚Äî je privil√©gie la s√©curit√©',
        opt_risque_modere: 'Mod√©r√© ‚Äî un √©quilibre entre plaisir et rendement',
        opt_risque_eleve: '√âlev√© ‚Äî je recherche avant tout la performance',
        step2_title: 'VOLET 2 ‚Äî Transmission',
        step2_desc: 'Le vin peut aussi √™tre un symbole fort de transmission ‚Äî culturelle, √©motionnelle et patrimoniale.',
        label_enfants: 'Avez-vous des enfants ?',
        label_nombre_enfants: 'Si oui, combien ?',
        label_mariage: '√ätes-vous mari√©(e) ?',
        label_regime: 'Si oui, sous quel r√©gime matrimonial ?',
        opt_regime_communautelegale: 'Communaut√© l√©gale',
        opt_regime_separationbien: 'S√©paration de biens',
        opt_regime_communauteuniverselle: 'Communaut√© universelle',
        label_societe: 'Avez-vous une soci√©t√© ?',
        opt_oui: "Oui",
        opt_non: "Non",
        label_type_societe: 'Si oui, pr√©cisez le type :',
        label_donations: 'Avez-vous d√©j√† effectu√© des donations ?',
        label_importance_patrimoine: 'Quelle importance accordez-vous √† la notion de ‚Äúpatrimoine culturel‚Äù dans la transmission ?',
        opt_importance_faible: 'Faible',
        opt_importance_moyenne: 'Moyenne',
        opt_importance_elevee: '√âlev√©e',
        label_presentation: 'Souhaitez-vous recevoir une pr√©sentation sur :',
        cb_transmission: 'Le vin comme support de transmission',
        cb_aspects: 'Aspects culturels et bonnes pratiques',
        label_remarques: 'Remarques compl√©mentaires / souhaits particuliers :',
        step3_title: 'üìú D√©sirez-vous obtenir votre rapport gratuit ?',
        step3_desc: 'Merci de nous faire parvenir vos coordonn√©es afin de recevoir votre rapport viticole personnalis√©.',
        label_nom: 'Nom',
        label_prenom: 'Pr√©nom',
        label_mail: 'Adresse e-mail',
        label_tel: 'T√©l√©phone',
        label_domicile: 'Domicile',
        btn_prev: '‚¨ÖÔ∏è Retour',
        btn_next: 'Suivant ‚û°Ô∏è',
        btn_submit: 'Envoyer ‚úÖ',
        cg_checkbox_label: "J‚Äôai lu et j‚Äôaccepte les <span id='toggleCG' class='cg-link'>Conditions de GrandcruX</span>.",
        conditions_title: "Conditions de GrandcruX",
        conditions_a_title: "a) Clause de non-conseil",
        conditions_a_text: "Les rapports GrandcruX sont fournis √† titre informatif et ne constituent en aucun cas un conseil en investissement, fiscal, juridique ou financier.",
        conditions_b_title: "b) Clause de non-responsabilit√©",
        conditions_b_text: "GrandcruX et ses partenaires ne sauraient √™tre tenus responsables de tout pr√©judice direct ou indirect r√©sultant de l‚Äôinterpr√©tation ou de l‚Äôutilisation du contenu du rapport.",
        conditions_c_title: "c) Clause de propri√©t√© intellectuelle",
        conditions_c_text: "Les rapports GrandcruX sont la propri√©t√© exclusive de GrandcruX. Toute reproduction, diffusion, modification ou revente, totale ou partielle, sans autorisation √©crite pr√©alable, est strictement interdite.",
        conditions_d_title: "d) Clause d‚Äôacceptation",
        conditions_d_text: "En cochant la case d‚Äôacceptation ou en t√©l√©chargeant le rapport, l‚Äôutilisateur reconna√Æt avoir lu et accept√© les pr√©sentes Conditions.",
        print_option_label: "Je souhaite √©galement recevoir une <strong>version imprim√©e</strong> de mon rapport, √©ventuellement accompagn√©e du <em>pack d√©gustation GrandcruX üç∑</em>.",
        rgpd_checkbox_label: "J‚Äôaccepte que mes donn√©es personnelles soient utilis√©es par GrandcruX pour l‚Äô√©tablissement de mon rapport et conserv√©es conform√©ment √† la <span id='togglePrivacy' class='cg-link'>Politique de confidentialit√©</span>.",
        privacy_title: "Politique de confidentialit√©",
        privacy_1_title: "1. Finalit√© du traitement",
        privacy_1_text: "GrandcruX collecte certaines donn√©es personnelles afin d‚Äô√©tablir le rapport demand√©.",
        privacy_2_title: "2. Base l√©gale",
        privacy_2_text: "Le traitement repose sur votre consentement explicite et votre demande volontaire d'obtenir un rapport personnalis√©.",
        privacy_3_title: "3. Donn√©es collect√©es",
        privacy_3_text: "Nom, pr√©nom, e-mail, adresse postale, t√©l√©phone, informations familiales (ex. enfants), donn√©es patrimoniales fournies volontairement.",
        privacy_4_title: "4. Dur√©e de conservation",
        privacy_4_text: "Les donn√©es sont conserv√©es 12 mois apr√®s l‚Äôenvoi du rapport, sauf demande de suppression.",
        privacy_5_title: "5. S√©curit√© et stockage",
        privacy_5_text: "Les donn√©es sont stock√©es dans l‚ÄôUnion europ√©enne, avec chiffrement et acc√®s limit√©.",
        privacy_6_title: "6. Partage des donn√©es",
        privacy_6_text: "Les donn√©es ne sont jamais vendues. Elles sont uniquement partag√©es avec les prestataires techniques n√©cessaires.",
        privacy_7_title: "7. Vos droits",
        privacy_7_text: "Vous disposez d‚Äôun droit d‚Äôacc√®s, rectification, suppression, opposition, portabilit√© et retrait du consentement.",
        privacy_7_contact: "Pour exercer vos droits : info@grandcrux.com",
        privacy_8_title: "8. Responsable du traitement",
        privacy_8_text: "GrandcruX ‚Äì Contact : info@grandcrux.com",
        },
      nl: {
        title: 'Formulier',
        subtitle: 'Wijn tussen passie en erfgoed',
        step1_title: 'DEEL 1 ‚Äî Wijn',
        step1_desc: 'Dit eerste deel peilt naar uw relatie met wijn: plezier, erfgoed of beide.',
        label_age: "Hoe oud bent u?",
        label_relation: 'Wat is uw hoofdrelatie tot wijn?',
        opt_relation_consommation: 'Consumptie',
        opt_relation_investissement: 'Belegging / investering',
        opt_relation_les_deux: "Consumptie en investering",
        label_connaissance: 'Hoe goed kent u de wijnmarkt?',
        opt_connaissance_debutant: 'Beginner',
        opt_connaissance_amateur: 'Gevorderde liefhebber',
        opt_connaissance_connaisseur: 'Kenner / verzamelaar',
        opt_connaissance_professionnel: 'Wijnprofessional',
        label_region: 'Welke wijnregio spreekt u het meest aan?',
        opt_region_bordeaux: 'Bordeaux',
        opt_region_bourgogne: 'Bourgogne',
        opt_region_rhone: 'Rh√¥nedal',
        opt_region_loire: 'Loire',
        opt_region_champagne: 'Champagne',
        opt_region_alsace: 'Elzas',
        opt_region_provence: 'Provence',
        opt_region_italie: 'Itali√´ (Pi√´mont, Toscane...)',
        opt_region_espagne: 'Spanje (Rioja, Ribera del Duero...)',
        opt_region_portugal: 'Portugal',
        opt_region_nouveau_monde: 'Nieuwe Wereld (Chili, Argentini√´, Australi√´...)',
        opt_region_autre: "Ik heb geen specifieke voorkeur en sta open voor advies",
        label_budget: 'Welk jaarbudget besteedt u aan wijn?',
        opt_budget_moins_500: 'Minder dan ‚Ç¨500',
        opt_budget_500_2000: 'Tussen ‚Ç¨500 en ‚Ç¨2.000',
        opt_budget_2000_10000: 'Tussen ‚Ç¨2.000 en ‚Ç¨10.000',
        opt_budget_plus_10000: 'Meer dan ‚Ç¨10.000',
        opt_oui: "Ja",
        opt_non: "Nee",
        label_possession: 'In welke vorm bezit u wijn (of wenst u dat te doen)?',
        opt_poss_cave_personnelle: 'Eigen kelder',
        opt_poss_cave_externalisee: 'Uitbestede kelder / professionele bewaring',
        opt_poss_fonds: 'Fonds of platforms voor wijninvesteringen',
        opt_poss_pas_encore: 'Nog niet, maar ik wens informatie',
        label_motivation: 'Wat is uw voornaamste motivatie?',
        opt_motiv_plaisir: 'Smaakplezier',
        opt_motiv_transmission: 'Familiale overdracht',
        opt_motiv_placement: 'Langetermijnbelegging',
        opt_motiv_diversification: 'Vermogensdiversificatie',
        opt_motiv_autre: 'Andere',
        label_risque: 'Welk risiconiveau wilt u aanvaarden?',
        opt_risque_tres_faible: 'Zeer laag ‚Äî ik verkiest veiligheid',
        opt_risque_modere: 'Gemiddeld ‚Äî balans tussen plezier en rendement',
        opt_risque_eleve: 'Hoog ‚Äî ik mik vooral op prestatie',
        step2_title: 'DEEL 2 ‚Äî Overdracht',
        step2_desc: 'Wijn kan ook een sterk symbool van overdracht zijn ‚Äî cultureel, emotioneel en vermogensgericht.',
        label_enfants: 'Heeft u kinderen?',
        label_nombre_enfants: 'Zo ja, hoeveel?',
        label_mariage: 'Bent u gehuwd?',
        label_regime: 'Zo ja, onder welk huwelijksstelsel?',
        opt_regime_communautelegale: 'Wettelijke gemeenschap',
        opt_regime_separationbien: 'Scheiding van goederen',
        opt_regime_communauteuniverselle: 'Algehele gemeenschap',
        label_societe: 'Heeft u een vennootschap?',
        label_type_societe: 'Zo ja, welk type?',
        label_donations: 'Heeft u al schenkingen gedaan?',
        label_importance_patrimoine: 'Hoe belangrijk vindt u ‚Äúcultureel erfgoed‚Äù bij de overdracht?',
        opt_importance_faible: 'Laag',
        opt_importance_moyenne: 'Gemiddeld',
        opt_importance_elevee: 'Hoog',
        label_presentation: 'Wenst u een presentatie over:',
        cb_transmission: 'Wijn als drager van overdracht',
        cb_aspects: 'Culturele aspecten en goede praktijken',
        label_remarques: 'Aanvullende opmerkingen / bijzondere wensen:',
        step3_title: 'üìú Wenst u uw gratis rapport te ontvangen?',
        step3_desc: 'Gelieve uw contactgegevens door te geven om uw gepersonaliseerd wijnrapport te ontvangen.',
        label_nom: 'Naam',
        label_prenom: 'Voornaam',
        label_mail: 'E-mailadres',
        label_tel: 'Telefoon',
        label_domicile: 'Woonplaats',
        btn_prev: '‚¨ÖÔ∏è Terug',
        btn_next: 'Volgende ‚û°Ô∏è',
        btn_submit: 'Verzenden ‚úÖ',
        cg_checkbox_label: "Ik heb de <span id='toggleCG' class='cg-link'>GrandcruX-voorwaarden</span> gelezen en aanvaard.",
        conditions_title: "Voorwaarden van GrandcruX",
        conditions_a_title: "a) Geen adviesclausule",
        conditions_a_text: "De GrandcruX-rapporten worden uitsluitend ter informatie verstrekt en vormen geen beleggings-, fiscale, juridische of financi√´le raad.",
        conditions_b_title: "b) Aansprakelijkheidsclausule",
        conditions_b_text: "GrandcruX en zijn partners kunnen niet aansprakelijk worden gesteld voor schade voortvloeiend uit het gebruik van het rapport.",
        conditions_c_title: "c) Intellectuele-eigendomsclausule",
        conditions_c_text: "De GrandcruX-rapporten zijn het exclusieve eigendom van GrandcruX. Elke reproductie of verspreiding zonder toestemming is verboden.",
        conditions_d_title: "d) Aanvaardingsclausule",
        conditions_d_text: "Door het vakje aan te vinken of het rapport te downloaden erkent de gebruiker deze voorwaarden te hebben gelezen en aanvaard.",
        print_option_label: "Ik wens ook een <strong>gedrukte versie</strong> van mijn rapport te ontvangen, vergezeld van het <em>GrandcruX-proefpakket üç∑</em>.",
        print_option_note: "(Betalende optie: premium-papierdruk, verzending met wijnselectie.)",
        rgpd_checkbox_label: "J‚Äôaccepte que mes donn√©es personnelles soient utilis√©es par GrandcruX pour l‚Äô√©tablissement de mon rapport et conserv√©es conform√©ment √† la <span id='togglePrivacy' class='cg-link'><strong>Politique de confidentialit√©</strong></span>.",
        privacy_title: "Politique de confidentialit√©",
        privacy_1_title: "1. Finalit√© du traitement",
        privacy_1_text: "GrandcruX collecte certaines donn√©es personnelles afin d‚Äô√©tablir le rapport demand√©.",
        privacy_2_title: "2. Base l√©gale",
        privacy_2_text: "Le traitement repose sur votre consentement explicite et votre demande volontaire d'obtenir un rapport personnalis√©.",
        privacy_3_title: "3. Donn√©es collect√©es",
        privacy_3_text: "Nom, pr√©nom, e-mail, adresse postale, t√©l√©phone, informations familiales (ex. enfants), donn√©es patrimoniales fournies volontairement.",
        privacy_4_title: "4. Dur√©e de conservation",
        privacy_4_text: "Les donn√©es sont conserv√©es 12 mois apr√®s l‚Äôenvoi du rapport, sauf demande de suppression.",
        privacy_5_title: "5. S√©curit√© et stockage",
        privacy_5_text: "Les donn√©es sont stock√©es dans l‚ÄôUnion europ√©enne, avec chiffrement et acc√®s limit√©.",
        privacy_6_title: "6. Partage des donn√©es",
        privacy_6_text: "Les donn√©es ne sont jamais vendues. Elles sont uniquement partag√©es avec les prestataires techniques n√©cessaires.",
        privacy_7_title: "7. Vos droits",
        privacy_7_text: "Vous disposez d‚Äôun droit d‚Äôacc√®s, rectification, suppression, opposition, portabilit√© et retrait du consentement.",
        privacy_7_contact: "Pour exercer vos droits : info@grandcrux.com",
        privacy_8_title: "8. Responsable du traitement",
        privacy_8_text: "GrandcruX ‚Äì Contact : info@grandcrux.com",
        rgpd_checkbox_label: "Ik ga ermee akkoord dat mijn persoonsgegevens worden gebruikt door GrandcruX voor het opstellen van mijn rapport en worden bewaard volgens het <span id='togglePrivacy' class='cg-link'>Privacybeleid</span>.",
        privacy_title: "Privacybeleid",
        privacy_1_title: "1. Doel van de verwerking",
        privacy_1_text: "GrandcruX verzamelt bepaalde persoonsgegevens uitsluitend om het aangevraagde rapport op te stellen.",
        privacy_2_title: "2. Wettelijke basis",
        privacy_2_text: "De verwerking is gebaseerd op uw uitdrukkelijke toestemming en uw vrijwillige aanvraag voor een gepersonaliseerd rapport.",
        privacy_3_title: "3. Verzamelde gegevens",
        privacy_3_text: "Naam, voornaam, e-mail, postadres, telefoonnummer, gezinsinformatie, en patrimoniale gegevens die vrijwillig zijn verstrekt.",
        privacy_4_title: "4. Bewaartermijn",
        privacy_4_text: "De gegevens worden 12 maanden bewaard na verzending van het rapport, tenzij eerder verwijdering wordt gevraagd.",
        privacy_5_title: "5. Beveiliging en opslag",
        privacy_5_text: "De gegevens worden opgeslagen binnen de Europese Unie met versleuteling en beperkte toegang.",
        privacy_6_title: "6. Gegevensdeling",
        privacy_6_text: "Gegevens worden nooit verkocht. Ze worden alleen gedeeld met noodzakelijke technische dienstverleners.",
        privacy_7_title: "7. Uw rechten",
        privacy_7_text: "U heeft recht op inzage, correctie, verwijdering, bezwaar, overdraagbaarheid en intrekking van toestemming.",
        privacy_7_contact: "Uw rechten uitoefenen: info@grandcrux.com",
        privacy_8_title: "8. Verwerkingsverantwoordelijke",
        privacy_8_text: "GrandcruX ‚Äì Contact: info@grandcrux.com",
      },
      
      en: {
        title: 'Form',
        subtitle: 'Wine between passion and heritage',
        step1_title: 'SECTION 1 ‚Äî Wine',
        step1_desc: 'This first section aims to understand your relationship with wine: pleasure, heritage, or both.',
        label_age: "How old are you?",
        label_relation: 'What is your primary relationship to wine?',
        opt_relation_consommation: 'Consumption',
        opt_relation_investissement: 'Investment',
        opt_relation_les_deux: "Consumption and investment",
        label_connaissance: 'How familiar are you with the wine market?',
        opt_connaissance_debutant: 'Beginner',
        opt_connaissance_amateur: 'Informed enthusiast',
        opt_connaissance_connaisseur: 'Connoisseur / collector',
        opt_connaissance_professionnel: 'Wine professional',
        label_region: 'Which wine region attracts you most?',
        opt_region_bordeaux: 'Bordeaux',
        opt_region_bourgogne: 'Burgundy',
        opt_region_rhone: 'Rh√¥ne Valley',
        opt_region_loire: 'Loire',
        opt_region_champagne: 'Champagne',
        opt_region_alsace: 'Alsace',
        opt_region_provence: 'Provence',
        opt_region_italie: 'Italy (Piedmont, Tuscany...)',
        opt_region_espagne: 'Spain (Rioja, Ribera del Duero...)',
        opt_region_portugal: 'Portugal',
        opt_region_nouveau_monde: 'New World (Chile, Argentina, Australia...)',
        opt_region_autre: "I have no particular preference and welcome good advice",
        label_budget: 'What annual budget do you allocate to wine?',
        opt_budget_moins_500: 'Less than ‚Ç¨500',
        opt_budget_500_2000: 'Between ‚Ç¨500 and ‚Ç¨2,000',
        opt_budget_2000_10000: 'Between ‚Ç¨2,000 and ‚Ç¨10,000',
        opt_budget_plus_10000: 'More than ‚Ç¨10,000',
        opt_oui: "Yes",
        opt_non: "No",
        label_possession: 'In what form do you own wine (or wish to)?',
        opt_poss_cave_personnelle: 'Personal cellar',
        opt_poss_cave_externalisee: 'External cellar / professional storage',
        opt_poss_fonds: 'Wine investment funds or platforms',
        opt_poss_pas_encore: 'Not yet, but I‚Äôd like information',
        label_motivation: 'What is your main motivation?',
        opt_motiv_plaisir: 'Taste pleasure',
        opt_motiv_transmission: 'Family transmission',
        opt_motiv_placement: 'Long‚Äëterm investment',
        opt_motiv_diversification: 'Asset diversification',
        opt_motiv_autre: 'Other',
        label_risque: 'What level of risk are you willing to accept?',
        opt_risque_tres_faible: 'Very low ‚Äî I prioritize safety',
        opt_risque_modere: 'Moderate ‚Äî a balance between pleasure and return',
        opt_risque_eleve: 'High ‚Äî I primarily seek performance',
        step2_title: 'SECTION 2 ‚Äî Transmission',
        step2_desc: 'Wine can also be a powerful symbol of transmission ‚Äî cultural, emotional, and patrimonial.',
        label_enfants: 'Do you have children?',
        label_nombre_enfants: 'If yes, how many?',
        label_mariage: 'Are you married?',
        label_regime: 'If yes, under which marital regime?',
        opt_regime_communautelegale: 'Legal community',
        opt_regime_separationbien: 'Separation of property',
        opt_regime_communauteuniverselle: 'Universal community',
        label_societe: 'Do you have a company?',
        label_type_societe: 'If yes, specify the type:',
        label_donations: 'Have you already made donations?',
        label_importance_patrimoine: 'How important is the notion of ‚Äúcultural heritage‚Äù in transmission to you?',
        opt_importance_faible: 'Low',
        opt_importance_moyenne: 'Medium',
        opt_importance_elevee: 'High',
        label_presentation: 'Would you like to receive a presentation on:',
        cb_transmission: 'Wine as a vehicle for transmission',
        cb_aspects: 'Cultural aspects and best practices',
        label_remarques: 'Additional remarks / special requests:',
        step3_title: 'üìú Would you like to receive your free report?',
        step3_desc: 'Please share your contact details to receive your personalized wine report.',
        label_nom: 'Last name',
        label_prenom: 'First name',
        label_mail: 'Email address',
        label_tel: 'Phone',
        label_domicile: 'Residence',
        btn_prev: '‚¨ÖÔ∏è Back',
        btn_next: 'Next ‚û°Ô∏è',
        btn_submit: 'Send ‚úÖ',
        cg_checkbox_label: "I have read and accept the <span id='toggleCG' class='cg-link'>GrandcruX Terms</span>.",
        conditions_title: "GrandcruX Terms",
        conditions_a_title: "a) Disclaimer of advice",
        conditions_a_text: "GrandcruX reports are provided for informational purposes only and do not constitute investment, tax, legal, or financial advice.",
        conditions_b_title: "b) Liability disclaimer",
        conditions_b_text: "GrandcruX and its partners cannot be held liable for any direct or indirect damage resulting from the interpretation or use of the report‚Äôs content.",
        conditions_c_title: "c) Intellectual property",
        conditions_c_text: "GrandcruX reports are the exclusive property of GrandcruX. Any reproduction, distribution, modification, or resale without prior written authorization is strictly prohibited.",
        conditions_d_title: "d) Acceptance clause",
        conditions_d_text: "By ticking the box or downloading the report, the user acknowledges having read and accepted these Terms.",
        print_option_label: "I would also like to receive a <strong>printed version</strong> of my report, accompanied by the <em>GrandcruX tasting pack üç∑</em>.",
        print_option_note: "(Paid option: premium paper printing, shipped with a wine selection.)",
        rgpd_checkbox_label: "I agree that my personal data may be used by GrandcruX to prepare my report and stored in accordance with the <span id='togglePrivacy' class='cg-link'>Privacy Policy</span>.",
        privacy_title: "Privacy Policy",
        privacy_1_title: "1. Purpose of processing",
        privacy_1_text: "GrandcruX collects certain personal data solely to prepare the requested report.",
        privacy_2_title: "2. Legal basis",
        privacy_2_text: "Processing is based on your explicit consent and your voluntary request for a personalized report.",
        privacy_3_title: "3. Data collected",
        privacy_3_text: "Name, first name, email, postal address, phone number, family information, and patrimonial data voluntarily provided.",
        privacy_4_title: "4. Data retention",
        privacy_4_text: "Data are kept for 12 months after the report is sent unless deletion is requested earlier.",
        privacy_5_title: "5. Security and storage",
        privacy_5_text: "Data are stored within the European Union with encryption and restricted access.",
        privacy_6_title: "6. Data sharing",
        privacy_6_text: "Data are never sold. They are only shared with essential technical providers.",
        privacy_7_title: "7. Your rights",
        privacy_7_text: "You have the right to access, rectify, delete, oppose, port your data and withdraw consent.",
        privacy_7_contact: "To exercise your rights: info@grandcrux.com",
        privacy_8_title: "8. Data controller",
        privacy_8_text: "GrandcruX ‚Äì Contact: info@grandcrux.com",
      }
    };

    // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
    // Application des traductions + suffixes name/id
    // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
    let currentLang = 'fr';

    function applyTranslations(lang) {
    // Texte statique
    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.getAttribute('data-i18n');
      if (t[lang][key] !== undefined) {
        // Si la traduction contient du HTML, on l'injecte avec innerHTML
        if (t[lang][key].includes('<')) {
          el.innerHTML = t[lang][key];
        } else {
          el.textContent = t[lang][key];
        }
      }
    });
      // options des selects
      document.querySelectorAll('[data-i18n-option]').forEach(opt=>{
        const key = opt.getAttribute('data-i18n-option');
        if(t[lang][key]!==undefined){ opt.textContent = t[lang][key]; }
      });
      // noms / ids + labels for
      document.querySelectorAll('[data-name-base]').forEach(input=>{
        const base = input.getAttribute('data-name-base');
        const idBase = input.getAttribute('data-id-base');
        const newName = base + '_' + lang;
        const newId = idBase + '_' + lang;
        input.setAttribute('name', newName);
        input.setAttribute('id', newId);
      });
      document.querySelectorAll('[data-for-base]').forEach(label=>{
        const base = label.getAttribute('data-for-base');
        label.setAttribute('for', base + '_' + lang);
      });
      // checkboxes: aussi mettre name/id
      document.querySelectorAll('input[type="checkbox"][data-name-base]').forEach(cb=>{
        const base = cb.getAttribute('data-name-base');
        const idBase = cb.getAttribute('data-id-base');
        cb.name = base + '_' + lang;
        cb.id = idBase + '_' + lang;
      });
      // attribut lang + hidden input
      document.documentElement.lang = lang;
      document.getElementById('lang_hidden').value = lang;
    }

    // init
    applyTranslations(currentLang);

    // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
    // Switch de langue (boutons)
    // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
    document.querySelectorAll('.lang-btn').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const lang = btn.getAttribute('data-lang');
        if(lang === currentLang) return;
        currentLang = lang;
        // toggle aria-pressed
        document.querySelectorAll('.lang-btn').forEach(b=> b.setAttribute('aria-pressed', String(b===btn)));
        applyTranslations(currentLang);
        // garder l'√©tape courante affich√©e
        showStep(currentStep);
      });
    });

    // Emp√™che le double-post si besoin (optionnel)
    document.getElementById('multiForm').addEventListener('submit', function(){
      // Ici, vous pouvez ajouter un disable de boutons si souhait√©
    });

    const privacyContent = document.getElementById('privacyContent');
    const acceptRGPD = document.getElementById('acceptRGPD');
    const togglePrivacy = document.getElementById('togglePrivacy');
    const toggleCG = document.getElementById('toggleCG');
    const conditionsContent = document.getElementById('conditionsContent');
    const acceptCG = document.getElementById('acceptCG');
    const printOption = document.getElementById('printOption');
    const sendReport = document.getElementById('sendReport');

    // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
  // 1. Ouvrir / fermer les conditions
  // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
  document.addEventListener('click', (e) => {
    
    if (e.target && e.target.id === 'toggleCG') {
      conditionsContent.style.display =
        conditionsContent.style.display === 'none' ? 'block' : 'none';
    }

    if (e.target && e.target.id === 'togglePrivacy') {
      privacyContent.style.display =
        privacyContent.style.display === 'none' ? 'block' : 'none';
    } 
    
  });

  // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
  // 2. Activer "Envoyer" seulement si CG + RGPD coch√©s
  // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
  function refreshSubmitStatus() {
    sendReport.disabled = !(acceptCG.checked && acceptRGPD.checked);
  }

  acceptCG.addEventListener('change', refreshSubmitStatus);
  acceptRGPD.addEventListener('change', refreshSubmitStatus);

  // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
  // 3. Bloquer le bouton d√®s le premier clic
  // ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
  document.getElementById('multiForm').addEventListener('submit', function(e) {
    const submitBtn = document.getElementById('sendReport');
    submitBtn.disabled = true;
  });

  </script>
</body>
</html>
